<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="renderer" content="webkit">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <title>Secure Deployment - OWASP SAMM</title>
  
  <meta name="description" content="Overview     A: Deployment Process B: Configurations/Secret Management     Maturity 1 - Deployment processes are fully documented Deployment is automated or done by someone other than the developer. Configuration files are versioned and protected   Maturity 2 - Deployment processes include security verification milestores Integration of security verification in deployment (e.g. binary static code analysis / AV scan) Configuration files do not contain unencrypted sensitive configuration information   Maturity 3 - Deployment process is fully automated and incorporates automated verification of all critical milestones Integrity of the code is verified prior to deployment Deployment process automatically generates / initializes credentials and authentication keys    A: Deployment Process Maturity 1 Activity Applications are deployed via automated processes, or manually by persons other than the developers.">
  <meta name="author" content="">
  
  <link href="/css/semantic.min.css" rel="stylesheet">
  <link href="/css/style.css" rel="stylesheet">
  
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">
  <link rel="icon" href="/img/favicon.png">
  
  <meta name="generator" content="Hugo">
  
  <link rel="alternate" type="application/atom+xml" href="/index.xml" title="OWASP SAMM">
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127457120-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-127457120-1');
  </script>
</head>
<body class="single">
  <header class="ui container">
    <h1 class="ui header">
      <div class="content">
        OWASP SAMM
        <div class="sub header">Software Assurance Maturity Model</div>
      </div>
    </h1>
  </header>
  <main class="ui container">


<h1 class="ui huge dividing header">
  Secure Deployment
</h1>

<div class="ui buttons">
  <a href="/" class="ui green button"><i class="hand point left icon"></i> Back</button>
  <a href="https://github.com/OWASP/samm/edit/master/v2.0/beta/core/implementation/i-secure-deployment.md" class="ui blue button"><i class="pencil icon"></i> Edit this page</a>
</div>

<div class="ui hidden divider"></div>

<div class="ui large labels">
  <div class="ui green label">
    Business function
    <div class="detail">Implementation</div>
  </div>
  <div class="ui orange label">
    Assigned to
    <div class="detail">Chris Cooper (chris.cooper@owasp.org)</div>
  </div>
  
  <div class="ui label">
    Progress
    <div class="detail"><span class="donut">0/100</span> 0%</div>
  </div>
  
</div>



<h1 id="overview">Overview</h1>

<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">A: Deployment Process</th>
<th align="left">B: Configurations/Secret Management</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">Maturity 1 - Deployment processes are fully documented</td>
<td align="left">Deployment is automated or done by someone other than the developer.</td>
<td align="left">Configuration files are versioned and protected</td>
</tr>

<tr>
<td align="left">Maturity 2 - Deployment processes include security verification milestores</td>
<td align="left">Integration of security verification in deployment (e.g. binary static code analysis / AV scan)</td>
<td align="left">Configuration files do not contain unencrypted sensitive configuration information</td>
</tr>

<tr>
<td align="left">Maturity 3 - Deployment process is fully automated and incorporates automated verification of all critical milestones</td>
<td align="left">Integrity of the code is verified prior to deployment</td>
<td align="left">Deployment process automatically generates / initializes credentials and authentication keys</td>
</tr>
</tbody>
</table>

<h1 id="a-deployment-process">A: Deployment Process</h1>

<h2 id="maturity-1">Maturity 1</h2>

<h3 id="activity">Activity</h3>

<p>Applications are deployed via automated processes, or manually by persons other than the developers. Developers should not have access to production environments.</p>

<p>Any tools utilised during deployment should be carefully chosen and hardened appropriately. These tools may require access to the production environment, which makes the security of the tools themselves extremely critical. This includes ensuring that the integrity of the tools themselves and the workflows that they are programmed to follow.</p>

<p>The tools and/or engineer conducting the deployment will require access to production credentials and secrets. These should be handled with care - e.g. according to the principle of least privilege, and encrypted at rest with keys held in a trusted platform module (TPM) or hardware security module (HSM).</p>

<h4 id="maturity-questions">Maturity Questions</h4>

<h5 id="q-1">Q 1</h5>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat?</p>

<p><strong>Answer Options</strong>
- Option 1
- Option 2
- Option 3
- Option 4</p>

<h4 id="notes">Notes</h4>

<ul>
<li>What if deployment has to been done by devs? I.e. small org?</li>
<li>Are we assuming that the deployment is to production?</li>
<li>Separation of roles/responsibilities regardless of size/process? How to marry this with DevOps practices? Whenever 3rd party certification is involved - it has to be done by a separate &ldquo;department&rdquo; (compliance requirement = segregation of duties)? consider 4-eyes principle? require training before being granted access?</li>
</ul>

<p>ACTION: review this stream completely</p>

<h4 id="guidance">Guidance</h4>

<h2 id="maturity-2">Maturity 2</h2>

<h3 id="activity-1">Activity</h3>

<p>Deployment is fully or at least semi-automated for consistency, to reduce the need for manual changes on production, and to ultimately reduce the chances of human error.</p>

<p>Deployments include appropriate automated security checks such as DAST and malware scanning. Relevant persons should be notified automatically of any defects. The deployment should be stopped or reversed automatically, or as part of a manual approval workflow, if the defect exceeds a certain threshold of severity or risk. The results from these tests should be logged centrally and actioned as necessary.</p>

<p>All deployments are accounted for and are auditable. A system is in place to record each deployment, including information about who conducted the deploy, the software version that was deployed, and any relevant variables that were specific to the deploy.</p>

<h3 id="maturity-questions-1">Maturity Questions</h3>

<h4 id="q-1-1">Q 1</h4>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat?</p>

<p><strong>Answer Options</strong></p>

<ul>
<li>Option 1</li>
<li>Option 2</li>
<li>Option 3</li>
<li>Option 4</li>
</ul>

<h4 id="notes-1">Notes</h4>

<h4 id="guidance-1">Guidance</h4>

<h2 id="maturity-3">Maturity 3</h2>

<h3 id="activity-2">Activity</h3>

<p>The deployment process automatically verifies the integrity of the binaries by checking their signatures against trusted certificates. Binaries should have been signed at build time. This may include binaries that have been developed and built in-house, as well as third-party libraries. Binary signatures that cannot be verified, including if the certificate is invalid or has expired, should not be deployed.</p>

<p>If the list of trusted certificates includes third-party developers, these should be checked periodically, and maintained in-line with the organisation&rsquo;s wider governance surrounding trusted third-party suppliers.</p>

<p>A human should manually approve the deployment on at least one occasion during an automated deployment. Manual interventions should be inserted into the otherwise automated deployment process for checking and approval. These interventions should occur at any points where such human checks could be significantly more accurate than an automated one would be.</p>

<h3 id="maturity-questions-2">Maturity Questions</h3>

<h4 id="q-1-2">Q 1</h4>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat?</p>

<p><strong>Answer Options</strong>
- Option 1
- Option 2
- Option 3
- Option 4</p>

<h4 id="notes-2">Notes</h4>

<p>Does this activity deserve a whole stream instead of only one activity?</p>

<p>Partial deployment to test it in prodution to prevent DOS/quality issues</p>

<h4 id="guidance-2">Guidance</h4>

<h1 id="b-configurations-secret-management">B: Configurations/Secret Management</h1>

<h2 id="maturity-1-1">Maturity 1</h2>

<h3 id="activity-3">Activity</h3>

<p>Configuration files should be versioned and protected just like source code. However, developers should not have access to secrets or credentials for production environments. Production secrets should be added into configuration files during the deployment process by someone who is responsible for the production environment.</p>

<p>Production secrets should not be kept (even unused) in configuration files used within development or testing environments, as such environments may have a significantly lower security posture. Equally, they should not remain in configuration files that are stored in code repositories.</p>

<h3 id="maturity-questions-3">Maturity Questions</h3>

<h4 id="q-1-3">Q 1</h4>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat?</p>

<p><strong>Answer Options</strong>
- Option 1
- Option 2
- Option 3
- Option 4</p>

<h4 id="notes-3">Notes</h4>

<ul>
<li>[CC] I&rsquo;ve removed: &ldquo;Configuration files should be treated as code&rdquo; &hellip; I think sensitive values in configuration files should always be protected, even at level 1.</li>
<li>What about companies who are too small to have seperate people doing dev and managing prod?
Level 1: you cannot have plaintext credentials in code?  Config file separate?</li>
</ul>

<h4 id="guidance-3">Guidance</h4>

<h2 id="maturity-2-1">Maturity 2</h2>

<h3 id="activity-4">Activity</h3>

<p>Before deployment, sensitive credentials and secrets for production systems should be stored with encryption-at-rest and appropriate key management. The organisation should consider using a purpose-built tool/vault for this data. Key management should be handled carefully to ensure that only personnel with responsibility for production deployments are able to access this data (the principle of least privilege).</p>

<p>Where possible during deployment, secrets should be encrypted-at-rest in configuration files as well. There should be appropriate key management such that the application can access the secrets whilst it is running, but an attacker who obtains the configuration files alone would not be able to decipher them.</p>

<h3 id="maturity-questions-4">Maturity Questions</h3>

<h4 id="q-1-4">Q 1</h4>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat?</p>

<p><strong>Answer Options</strong>
- Option 1
- Option 2
- Option 3
- Option 4</p>

<h4 id="notes-4">Notes</h4>

<p>procedures when this happens? how to resolve this?
Protection of secrets in config file</p>

<h4 id="guidance-4">Guidance</h4>

<h2 id="maturity-3-1">Maturity 3</h2>

<h3 id="activity-5">Activity</h3>

<p>Credentials and secrets appropriate for the target environment are added to configuration files dynamically during the deployment process, in such a way that the deployer has no need to see or handle those sensitive values. I.e. this should be an automated process.</p>

<p>The developer should have no need to view or access those credentials or secrets, particularly from production systems, since they will be included automatically during deploy.</p>

<p>The system used to store and process the secrets and credentials must be robust from a security perspective. Secrets should be encrypted at rest and during transport. Users who configure this system and the secrets it contains should be subject to the principle of least privilege. For example, in some cases it might be appropriate for a developer to manage the secrets pertaining to a development environment, but not a UAT or production enviornment.</p>

<p>Where secrets are not pre-defined or dependant on another system, they should be generated afresh during the deployment process. This mechanism should meet appropriate best practices such as using a cryptographically secure pseudorandom number generator if the value is to be randomly generated.</p>

<h3 id="maturity-questions-5">Maturity Questions</h3>

<h4 id="q-1-5">Q 1</h4>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat?</p>

<p><strong>Answer Options</strong>
- Option 1
- Option 2
- Option 3
- Option 4</p>

<h4 id="notes-5">Notes</h4>

<p>push parts of this to level 2 and concentrate level 3 on validation and improvement of this process
detection of secrets in code? e.g. looking for strings with a high level of entropy.
a mature process when this happens anyway? part of incident process?</p>

<h4 id="guidance-5">Guidance</h4>

<p>truffleHog reference?
also go into container level when appropriate</p>


<div class="ui section divider"></div>
<footer class="ui container footer">
  <div class="ui stackable grid">
    <div class="ui three wide column">
      <a href="https://www.owasp.org/"><img class="ui fluid image" src="/img/owasp.png" /></a>
    </div>
    <div class="ui thirteen wide column">
      <h3 class="ui blue sub header">This is an OWASP Project</h3>
      <p>OWASP is an international organization and the OWASP Foundation supports OWASP efforts around the world. OWASP is an open community dedicated to enabling organizations to conceive, develop, acquire, operate, and maintain applications that can be trusted. All of the OWASP tools, documents, forums, and chapters are free and open to anyone interested in improving application security. We advocate approaching application security as a people, process, and technology problem because the most effective approaches to application security include improvements in all of these areas. We can be found at <a href="https://www.owasp.org/">https://www.owasp.org/</a>.</p>
    </div>
  </div>
  <div class="ui stackable grid">
    <div class="ui three wide column">
      <a href="https://creativecommons.org/licenses/by-sa/4.0/"><img class="ui fluid image" src="/img/by-sa.png" /></a>
    </div>
    <div class="ui thirteen wide column">
      <h3 class="ui blue sub header">CC BY-SA 4.0</h3>
      <p>This work is licensed under the Creative Commons Attribution-Share Alike 4.0 License. To view a copy of this license, visit <a href="https://creativecommons.org/licenses/by-sa/4.0/">https://creativecommons.org/licenses/by-sa/4.0/</a>.</p>
    </div>
  </div>
</footer>
<script src="/js/semantic.min.js" data-no-instant></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" data-no-instant></script>
<script src="/js/jquery.peity.min.js" data-no-instant></script>
<script type="text/javascript">
  $(document).ready(function(){
    $('.donut').peity('donut');
  });
</script>
</body>
</html>

